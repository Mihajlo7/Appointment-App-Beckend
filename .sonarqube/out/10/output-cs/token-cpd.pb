ü
yC:\Users\Mihajlo.DESKTOP-T538ONP\Desktop\AppointmentApp\Appointment-App\AppointmentsAplication\AppointmentsAPI\Program.cs
	namespace 	
AppointmentsAPI
 
{ 
public 

class 
Program 
{		 
public

 
static

 
void

 
Main

 
(

  
string

  &
[

& '
]

' (
args

) -
)

- .
{ 	
var 
builder 
= 
WebApplication (
.( )
CreateBuilder) 6
(6 7
args7 ;
); <
;< =

LogManager 
. 
LoadConfiguration (
(( )
string) /
./ 0
Concat0 6
(6 7
	Directory7 @
.@ A
GetCurrentDirectoryA T
(T U
)U V
,V W
$strX f
)f g
)g h
;h i
builder 
. 
Services 
. 
ConfigureCors *
(* +
)+ ,
;, -
builder 
. 
Services 
. #
ConfigureIISIntegration 4
(4 5
)5 6
;6 7
builder 
. 
Services 
. 
ConfigureLogger ,
(, -
)- .
;. /
builder 
. 
Services 
. "
ConfigureDapperContext 3
(3 4
)4 5
;5 6
builder 
. 
Services 
. 
ConfigureRepository 0
(0 1
)1 2
;2 3
builder 
. 
Services 
. 
ConfigureMediator .
(. /
)/ 0
;0 1
builder 
. 
Services 
. 
AddControllers +
(+ ,
), -
;- .
builder 
. 
Services 
. #
AddEndpointsApiExplorer 4
(4 5
)5 6
;6 7
builder 
. 
Services 
. 
AddSwaggerGen *
(* +
)+ ,
;, -
var"" 
app"" 
="" 
builder"" 
."" 
Build"" #
(""# $
)""$ %
;""% &
if'' 
('' 
app'' 
.'' 
Environment'' 
.''  
IsDevelopment''  -
(''- .
)''. /
)''/ 0
{(( 
app)) 
.)) 

UseSwagger)) 
()) 
)))  
;))  !
app** 
.** 
UseSwaggerUI**  
(**  !
)**! "
;**" #
}++ 
app.. 
... 
UseMiddleware.. 
<.. ,
 GlobalExceptionHandlerMiddleware.. >
>..> ?
(..? @
)..@ A
;..A B
app// 
.// 
UseStaticFiles// 
(// 
)//  
;//  !
app00 
.00 

UseRouting00 
(00 
)00 
;00 
app11 
.11 
UseHttpsRedirection11 #
(11# $
)11$ %
;11% &
app22 
.22 
UseCors22 
(22 
$str22 *
)22* +
;22+ ,
app44 
.44 
UseAuthorization44  
(44  !
)44! "
;44" #
app77 
.77 
MapControllers77 
(77 
)77  
;77  !
app99 
.99 
Run99 
(99 
)99 
;99 
}:: 	
};; 
}<< ä
C:\Users\Mihajlo.DESKTOP-T538ONP\Desktop\AppointmentApp\Appointment-App\AppointmentsAplication\AppointmentsAPI\Extensions\ServiceConfigure.cs
	namespace

 	
AppointmentsAPI


 
.

 

Extensions

 $
{ 
public 

static 
class 
ServiceConfigure (
{ 
public 
static 
void 
ConfigureCors (
(( )
this) -
IServiceCollection. @
servicesA I
)I J
{ 	
services 
. 
AddCors 
( 
options $
=>% '
{ 
options 
. 
	AddPolicy !
(! "
$str" 4
,4 5
builder 
=> 
builder &
.& '
AllowAnyOrigin' 5
(5 6
)6 7
. 
AllowAnyMethod #
(# $
)$ %
. 
AllowAnyHeader #
(# $
)$ %
)% &
;& '
} 
) 
; 
} 	
public 
static 
void #
ConfigureIISIntegration 2
(2 3
this3 7
IServiceCollection8 J
servicesK S
)S T
{ 	
services 
. 
	Configure 
< 

IISOptions )
>) *
(* +
options+ 2
=>3 5
{6 7
}8 9
)9 :
;: ;
} 	
public!! 
static!! 
void!! 
ConfigureLogger!! *
(!!* +
this!!+ /
IServiceCollection!!0 B
services!!C K
)!!K L
{"" 	
services## 
.## 
AddSingleton## !
<##! "
ILoggerManager##" 0
,##0 1
LoggerManager##1 >
>##> ?
(##? @
)##@ A
;##A B
}$$ 	
public&& 
static&& 
void&& "
ConfigureDapperContext&& 1
(&&1 2
this&&2 6
IServiceCollection&&7 I
services&&J R
)&&R S
{'' 	
services(( 
.(( 
	AddScoped(( 
<(( 
IDapperContext(( -
,((- .
DapperContext((. ;
>((; <
(((< =
)((= >
;((> ?
})) 	
public++ 
static++ 
void++ 
ConfigureRepository++ .
(++. /
this++/ 3
IServiceCollection++4 F
services++G O
)++O P
{,, 	
services-- 
.-- 
	AddScoped-- 
<-- 
IRepoH-- %
,--% &
RepoH--& +
>--+ ,
(--, -
)--- .
;--. /
services.. 
... 
	AddScoped.. 
<.. 
IRepository.. *
,..* +

Repository..+ 5
>..5 6
(..6 7
)..7 8
;..8 9
services// 
.// 
	AddScoped// 
<// 
IPersonService// -
,//- .
PersonService//. ;
>//; <
(//< =
)//= >
;//> ?
}00 	
public33 
static33 
void33 
ConfigureMediator33 ,
(33, -
this33- 1
IServiceCollection332 D
services33E M
)33M N
{44 	
services55 
.55 

AddMediatR55 
(55  
options55  '
=>55( *
{66 
options77 
.77 *
RegisterServicesFromAssemblies77 7
(777 8
typeof778 >
(77> ?
Program77? F
)77F G
.77G H
Assembly77H P
,77P Q
typeof88 
(88 
GetMaxHeightHandler88 .
)88. /
.88/ 0
Assembly880 8
)888 9
;889 :
}99 
)99 
;99 
}:: 	
}<< 
}== ª
ŒC:\Users\Mihajlo.DESKTOP-T538ONP\Desktop\AppointmentApp\Appointment-App\AppointmentsAplication\AppointmentsAPI\Controllers\TestController.cs
	namespace 	
AppointmentsAPI
 
. 
Controllers %
{ 
[ 
ApiController 
] 
[		 
Route		 

(		
 
$str		 
)		 
]		 
public

 

class

 
TestController

 
:

  !
ControllerBase

" 0
{ 
private 
readonly 
ILoggerManager '
_logger( /
;/ 0
public 
TestController 
( 
ILoggerManager ,
logger- 3
)3 4
{ 	
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
Get  
(  !
int! $
id% '
)' (
{ 	
if 
( 
id 
== 
$num 
) 
{ 
_logger 
. 
LogInfo 
(  
$str  K
)K L
;L M
_logger 
. 
LogDebug  
(  !
$str! M
)M N
;N O
_logger 
. 
LogWarn 
(  
$str  K
)K L
;L M
_logger 
. 
LogError  
(  !
$str! M
)M N
;N O
} 
if 
( 
id 
== 
$num 
) 
{ 
throw   
new   
	Exception   #
(  # $
$str  $ 2
)  2 3
;  3 4
}!! 
return"" 
Ok"" 
("" 
new"" 
string""  
[""  !
]""! "
{""# $
$str""% -
,""- .
$str""/ 7
}""8 9
)""9 :
;"": ;
}## 	
[$$ 	
HttpGet$$	 
]$$ 
public%% 
IActionResult%% 
Get%%  
(%%  !
)%%! "
{&& 	
return'' 
Ok'' 
('' 
new'' 
Person''  
{''! "
JMBG''# '
=''' (
$str''( .
}''. /
)''/ 0
;''0 1
}(( 	
})) 
}** œ
C:\Users\Mihajlo.DESKTOP-T538ONP\Desktop\AppointmentApp\Appointment-App\AppointmentsAplication\AppointmentsAPI\Controllers\PersonsController.cs
	namespace 	
AppointmentsAPI
 
. 
Controllers %
{ 
[		 
ApiController		 
]		 
[

 
Route

 

(


 
$str

 
)

 
]

 
public 

class 
PersonsController "
:" #
ControllerBase$ 2
{ 
private 
readonly 
	IMediator "
	_mediator# ,
;, -
private 
readonly 
ILoggerManager '
_logger( /
;/ 0
public 
PersonsController  
(  !
	IMediator! *
mediator+ 3
,3 4
ILoggerManager4 B
loggerC I
)I J
{ 	
	_mediator 
= 
mediator  
;  !
_logger 
= 
logger 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetMaxSizePerson) 9
(9 :
): ;
{ 	
_logger 
. 
LogInfo 
( 
$" 
$str /
"/ 0
)0 1
;1 2
var 
result 
= 
await 
	_mediator (
.( )
Send) -
(- .
new. 1
GetMaxHeightQuery2 C
(C D
)D E
)E F
;F G
return 
Ok 
( 
result 
) 
; 
} 	
[ 	
HttpGet	 
( 
$str 
) 
]  
public 
async 
Task 
< 
IActionResult '
>' (
GetOverweightPerson) <
(< =
)= >
{ 	
_logger 
. 
LogInfo 
( 
$" 
$str 1
"1 2
)2 3
;3 4
var   
result   
=   
await   
	_mediator   (
.  ( )
Send  ) -
(  - .
new  . 1
GetMaxHeightQuery  2 C
(  C D
)  D E
)  E F
;  F G
return!! 
Ok!! 
(!! 
result!! 
)!! 
;!! 
}"" 	
[## 	
HttpGet##	 
(## 
$str## 
)## 
]## 
public$$ 
async$$ 
Task$$ 
<$$ 
IActionResult$$ '
>$$' (
GetPersonForJmbg$$) 9
($$9 :
string$$: @
jmbg$$A E
)$$E F
{%% 	
_logger&& 
.&& 
LogInfo&& 
(&& 
$"&& 
$str&& ?
"&&? @
)&&@ A
;&&A B
var'' 
result'' 
='' 
await'' 
	_mediator'' (
.''( )
Send'') -
(''- .
new''. 1 
GetPersonByJmbgQuery''2 F
(''F G
jmbg''G K
)''K L
)''L M
;''M N
return(( 
Ok(( 
((( 
result(( 
)(( 
;(( 
})) 	
}** 
}++ ç$
“C:\Users\Mihajlo.DESKTOP-T538ONP\Desktop\AppointmentApp\Appointment-App\AppointmentsAplication\AppointmentsAPI\Controllers\AppointmentController.cs
	namespace 	
AppointmentsAPI
 
. 
Controllers %
{		 
[

 
ApiController

 
]

 
[ 
Route 

(
 
$str 
) 
] 
public 

class !
AppointmentController &
:' (
ControllerBase) 7
{ 
private 
readonly 
	IMediator "
	_mediator# ,
;, -
public !
AppointmentController $
($ %
	IMediator% .
mediator/ 7
)7 8
{ 	
	_mediator 
= 
mediator  
;  !
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
IActionResult '
>' (
GetMaxHeight) 5
(5 6
)6 7
{ 	
var 
	maxHeight 
= 
await  
	_mediator! *
.* +
Send+ /
(/ 0
new0 3
GetMaxHeightQuery4 E
(E F
)F G
)G H
;H I
return 
Ok 
( 
	maxHeight 
)  
;  !
} 	
[ 	
HttpPost	 
( 
$str  
)  !
]! "
public 
async 
Task 
< 
IActionResult '
>' (
InsertAppointment) :
(: ;
[; <
FromBody< D
]D E 
InsertAppointmentDTOF Z 
insertAppointmentDTO[ o
)o p
{ 	
var 
result 
= 
await 
	_mediator '
.' (
Send( ,
(, -
new- 0$
InsertAppointmentCommand1 I
(I J 
insertAppointmentDTOJ ^
)^ _
)_ `
;` a
return 
Created 
( 
$str 
, 
result $
)$ %
;% &
} 	
[   	
HttpPost  	 
(   
$str   '
)  ' (
]  ( )
public!! 
async!! 
Task!! 
<!! 
IActionResult!! '
>!!' (
UpdateAppointment!!) :
(!!: ;
[!!; <
FromBody!!< D
]!!D E 
UpdateAppointmentDTO!!F Z 
updateAppointmentDTO!![ o
)!!o p
{"" 	
var## 
result## 
=## 
await## 
	_mediator## (
.##( )
Send##) -
(##- .
new##. 1$
UpdateAppointmentCommand##3 K
(##K L 
updateAppointmentDTO##L `
)##` a
)##a b
;##b c
return$$ 
Ok$$ 
($$ 
result$$ 
)$$ 
;$$ 
}%% 	
[&& 	

HttpDelete&&	 
(&& 
$str&& "
)&&" #
]&&# $
public'' 
async'' 
Task'' 
<'' 
IActionResult'' '
>''' (
DeleteAppointment'') :
('': ;
[''; <
FromBody''< D
]''D E 
DeleteAppointmentDTO''F Z 
deleteAppointmentDTO''[ o
)''o p
{(( 	
var)) 
result)) 
=)) 
await)) 
	_mediator)) (
.))( )
Send))) -
())- .
new)). 1$
DeleteAppointmentCommand))3 K
())K L 
deleteAppointmentDTO))L `
)))` a
)))a b
;))b c
return** 
Ok** 
(** 
result** 
)** 
;** 
}++ 	
[,, 	
HttpGet,,	 
(,, 
$str,, 
),, 
],, 
public-- 
async-- 
Task-- 
<-- 
IActionResult-- '
>--' (
GetOverweightPeople--) <
(--< =
)--= >
{.. 	
var// 
result// 
=// 
await// 
	_mediator// '
.//' (
Send//( ,
(//, -
new//- 0
GetOverweightQuery//1 C
(//C D
)//D E
)//E F
;//F G
return00 
Ok00 
(00 
result00 
)00 
;00 
}11 	
}22 
}33 